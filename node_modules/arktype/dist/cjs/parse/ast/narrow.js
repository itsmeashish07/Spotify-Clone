"use strict";
Object.defineProperty(exports, "__esModule", {
    value: true
});
Object.defineProperty(exports, "parseNarrowTuple", {
    enumerable: true,
    get: ()=>parseNarrowTuple
});
const _nodeJs = require("../../nodes/node.js");
const _definitionJs = require("../definition.js");
const _distributableFunctionJs = require("./distributableFunction.js");
const parseNarrowTuple = (def, ctx)=>{
    const inputNode = (0, _definitionJs.parseDefinition)(def[0], ctx);
    const resolution = ctx.type.scope.resolveNode(inputNode);
    const hasConfig = (0, _nodeJs.isConfigNode)(resolution);
    const typeNode = hasConfig ? resolution.node : resolution;
    const result = (0, _nodeJs.rootIntersection)(inputNode, (0, _distributableFunctionJs.distributeFunctionToNode)(def[2], typeNode, ctx, "narrow"), ctx.type);
    return hasConfig ? {
        config: resolution.config,
        node: result
    } : result;
};
